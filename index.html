<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sci‑Fy Text Generator</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: black;
      cursor: pointer;
      color: #fefefe;
      font-family: Arial, sans-serif;
    }
    /* Header styling */
    header {
      position: absolute;
      top: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.8);
      padding: 10px;
      text-align: center;
      z-index: 10;
    }
    header h1 {
      margin: 0;
      font-size: 2em;
      color: #ffcc00;
    }
    header p {
      margin: 5px 0;
      font-size: 0.9em;
      color: #ccc;
    }
    header a {
      color: #66ccff;
      text-decoration: none;
    }
    /* Starfield background */
    #starfield {
      position: fixed;
      top: 0;
      left: 0;
      width: 2px;
      height: 2px;
      background: white;
      /* Each coordinate in the box-shadow is a star */
      box-shadow: 
        20px 30px white,
        50px 80px white,
        100px 150px white,
        200px 250px white,
        300px 100px white,
        400px 300px white,
        500px 350px white,
        600px 200px white,
        700px 400px white,
        800px 150px white,
        900px 300px white,
        1000px 100px white,
        1100px 350px white,
        1200px 450px white,
        1300px 250px white;
      animation: moveStars 100s linear infinite;
      opacity: 0.3;
      z-index: -1;
    }
    @keyframes moveStars {
      from { transform: translateY(0); }
      to { transform: translateY(-1000px); }
    }
    /* Container for the crawl text */
    #crawl {
      position: absolute;
      bottom: 0;
      width: 100%;
      perspective: 400px;
      z-index: 5;
    }
    /* Inner content that will scroll upward */
    #crawlContent {
      width: 80%;
      margin: 0 auto;
      text-align: center;
      font-family: "Pathway Gothic One", sans-serif;
      font-size: 2em;
      line-height: 1.5;
      color: yellow;
      transform: rotateX(25deg);
      transform-origin: 50% 100%;
      animation: none;
    }
    /* Star Wars–style crawl animation */
    @keyframes crawlAnimation {
      0% {
        transform: rotateX(25deg) translateY(100%);
      }
      100% {
        transform: rotateX(25deg) translateY(-200%);
      }
    }
  </style>
</head>
<body>
  <!-- Starfield Background -->
  <div id="starfield"></div>
  
  <!-- Header Section -->
  <header>
    <h1>Sci‑Fy Text Generator</h1>
    <p>
      Original Texts from: <a href="https://www.gutenberg.org/ebooks/bookshelf/480" target="_blank">Project Gutenberg Bookshelf</a>
    </p>
    <p>
      Author: Jonathan Woodall | Chatgpt o3 mini-high
    </p>
  </header>

  <!-- Crawl Section -->
  <div id="crawl">
    <div id="crawlContent"></div>
  </div>

  <script>
    // Global variable to hold the word categories loaded from JSON.
    let wordsDict = null;

    // Load the categorized words from the external JSON file.
    // Make sure the file 'categorized_words.json' is in the same directory.
    fetch('categorized_words.json')
      .then(response => response.json())
      .then(data => {
        wordsDict = data;
        // Display an initial story once the words have loaded.
        displayStory();
      })
      .catch(error => console.error('Error loading JSON:', error));

    // Sci‑fi themed paragraph templates grouped by style.
    const storyTemplates = {
      narrative: [
        "In the #adjectives# reaches of the cosmos, a lone #nouns# #verbs# silently. #proper_nouns.capitalize# watched from afar, pondering the mysteries of the #adjectives# void.",
        "Drifting through a sea of #adjectives# stars, the #nouns# #verbs# as if searching for an elusive truth. Meanwhile, #proper_nouns# #verbs# with quiet resolve."
      ],
      descriptive: [
        "The galaxy shimmered in #adjectives# hues as #nouns# and #nouns# mingled in the #adjectives# light. Every corner of space revealed a new facet of the #nouns#.",
        "Amid the #adjectives# nebulae, a field of #nouns# stretched endlessly, each emitting a glow of #adjectives# brilliance."
      ],
      dialogue: [
        "\"#proper_nouns.capitalize#, do you see how the #nouns# #verbs# beyond the horizon?\" whispered a voice in the void.",
        "\"The #nouns# have #verbs# once again,\" declared #proper_nouns#, \"and our destiny is now entwined with the #adjectives# currents of space.\""
      ],
      action: [
        "Without warning, the #nouns# #verbs# into motion, igniting a chain reaction among the #adjectives# satellites.",
        "In a burst of energy, the #nouns# #verbs#, scattering debris across the #adjectives# expanse."
      ],
      mysterious: [
        "A shadow moved where the light of the #adjectives# stars could not reach—as if a secret #nouns# was #verbs# in the dark.",
        "Deep in the #adjectives# void, an unknown #nouns# #verbs# with eerie precision, leaving #proper_nouns# perplexed."
      ],
      philosophical: [
        "What is a #nouns# but a fragment of the infinite? In the #adjectives# tapestry of space, even a #nouns# holds a universe of meaning.",
        "#proper_nouns.capitalize# mused, \"Every #nouns# is a story, bound by the #adjectives# laws of existence.\""
      ],
      epic: [
        "Across the #adjectives# expanse, a mighty #nouns# #verbs# towards destiny, heralding an age of #adjectives# wonders.",
        "In a clash of #nouns# and #nouns#, the cosmos trembled as #proper_nouns# led the charge with an #adjectives# spirit."
      ],
      cosmic: [
        "The universe unfolded like a #adjectives# scroll, where every #nouns# and #nouns# played its part in the #adjectives# drama of existence.",
        "Amid swirling clouds of #adjectives# stardust, the #nouns# #verbs#—a silent ode to the mystery of creation."
      ],
      melancholy: [
        "In the cold vacuum, a solitary #nouns# #verbs# while memories of a #adjectives# past echoed in the void.",
        "A #adjectives# sorrow pervaded space, as the #nouns# #verbs# with a heavy heart, leaving #proper_nouns# to ponder lost dreams."
      ]
    };

    // Utility function: pick a random element from an array.
    function randomChoice(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // Replace placeholders in the form #category# or #category.transformation#
    function replacePlaceholders(template, words) {
      return template.replace(/#([a-zA-Z_]+)(?:\.([a-zA-Z_]+))?#/g, (match, category, transformation) => {
        if (words[category] && words[category].length > 0) {
          let word = randomChoice(words[category]);
          if (transformation) {
            if (transformation === "capitalize") {
              word = word.charAt(0).toUpperCase() + word.slice(1);
            } else if (transformation === "upper") {
              word = word.toUpperCase();
            } else if (transformation === "lower") {
              word = word.toLowerCase();
            }
          }
          return word;
        }
        return match;
      });
    }

    // Generate a story by randomly picking paragraphs from various styles.
    function generateStory(words, templates, numParagraphs = 8) {
      const paragraphs = [];
      const availableStyles = Object.keys(templates);
      for (let i = 0; i < numParagraphs; i++) {
        const style = randomChoice(availableStyles);
        const template = randomChoice(templates[style]);
        const paragraph = replacePlaceholders(template, words);
        paragraphs.push(paragraph);
      }
      return paragraphs.join("\n\n");
    }

    // Generate and display the story with the crawl animation.
    function displayStory() {
      // Ensure the JSON has been loaded.
      if (!wordsDict) return;
      const story = generateStory(wordsDict, storyTemplates, 8);
      const crawlContent = document.getElementById("crawlContent");
      crawlContent.innerText = story;
      // Restart the animation: remove the animation property, force reflow, then add it back.
      crawlContent.style.animation = "none";
      void crawlContent.offsetWidth;
      // Increased duration to 40 seconds for slower scrolling.
      crawlContent.style.animation = "crawlAnimation 40s linear forwards";
    }

    // Trigger the story generation on any click anywhere on the screen.
    document.body.addEventListener("click", () => {
      if (wordsDict) displayStory();
    });
  </script>
</body>
</html>
